{"version":3,"file":"main.min.js","sources":["../../src/next-observer/index.ts"],"sourcesContent":[null],"names":["NextJsObserver","constructor","userConfig","this","readyCallbackExecuted","mutationCount","mutationTimer","observer","routeChangeCallbacks","routeLoadStartTime","config","Object","assign","timeout","checkInterval","debug","minContentCheck","routeChangeDetection","routeLoadTimeout","state","nextDetected","contentLoaded","scriptsLoaded","imagesLoaded","noMoreMutations","firstPaint","routeChangeInProgress","currentRoute","window","location","pathname","previousRoute","init","log","args","console","onNextJsReady","performance","now","toFixed","eventDetail","timestamp","Date","timing","dispatchEvent","CustomEvent","detail","detectNextJs","__NEXT_DATA__","nextScripts","document","querySelectorAll","length","metaGenerator","querySelector","content","includes","Array","from","scripts","some","s","src","match","checkContentLoaded","body","mainContent","totalTextLength","elementCount","forEach","el","text","_a","textContent","trim","children","checkScriptsLoaded","props","next","checkImagesLoaded","images","loadedCount","img","complete","naturalHeight","checkFirstPaint","PerformanceObserver","list","entry","getEntries","name","startTime","observe","entryTypes","e","checkIfReady","isNextDetected","isContentLoaded","isScriptsLoaded","isImagesLoaded","isFirstPaint","onMutationStable","disconnect","startObserving","MutationObserver","clearTimeout","setTimeout","documentElement","childList","subtree","attributes","characterData","checkCount","pollingInterval","setInterval","clearInterval","attachImageListeners","addEventListener","setupRouteChangeDetection","readyState","script","hasAttribute","setAttribute","debugInstance","forceCheck","forceReady","detectNext","getCurrentRoute","onRouteChange","callback","__nextObserver","onRouteChangeStart","to","beforeChangeDetail","onRouteLoadComplete","afterLoadDetail","route","self","router","events","on","url","startRouteLoadObservation","newRoute","originalPushState","history","pushState","originalReplaceState","replaceState","result","apply","search","maxChecks","push","NextObserver"],"mappings":"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"}