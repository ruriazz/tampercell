!function(e){"function"==typeof define&&define.amd?define(e):e()}(function(){"use strict";class CustomConsoleViewer{constructor(){this.maxLogEntries=500,this.maxCommandHistory=50,this.maxObjectProperties=100,this.promptInitialHeight=32,this.logs=[],this.isVisible=!1,this.activeFilters=new Set(["log","warn","error","info","debug","result"]),this.searchQuery="",this.commandHistory=[],this.historyIndex=-1,this.isPromptCollapsed=!1,this.originalConsole={log:console.log,warn:console.warn,error:console.error,info:console.info,debug:console.debug},this.init()}init(){this.createElements(),this.setupEventListeners(),this.overrideConsoleMethods(),this.setupGlobalFunctions(),console.log("üéâ Console Viewer is ready!"),setTimeout(()=>this.autoResizeTextarea(),100)}createElements(){const e=document.createElement("button");e.className="console-viewer-toggle",e.innerHTML=">_",e.title="Toggle Console Viewer",document.body.appendChild(e);const t=document.createElement("div");t.className="console-viewer-panel hidden",t.innerHTML=this.getPanelHTML(),document.body.appendChild(t),this.elements={toggleBtn:e,panel:t,logsContainer:t.querySelector(".console-viewer-logs"),clearBtn:t.querySelector(".console-viewer-clear"),searchInput:t.querySelector(".console-viewer-search input"),filterBtns:t.querySelectorAll(".console-viewer-filter"),promptInput:t.querySelector(".console-viewer-prompt textarea"),runBtn:t.querySelector(".console-viewer-run"),promptToggle:t.querySelector(".console-viewer-prompt-toggle"),promptContainer:t.querySelector(".console-viewer-prompt")}}getPanelHTML(){return'\n            <div class="console-viewer-toolbar">\n                <button class="console-viewer-clear">üóëÔ∏è Clear</button>\n                <div class="console-viewer-search">\n                    <input type="text" placeholder="üîç Search logs...">\n                </div>\n                <button class="console-viewer-filter log active" data-type="log">\n                    <span class="filter-dot"></span>\n                </button>\n                <button class="console-viewer-filter warn active" data-type="warn">\n                    <span class="filter-dot"></span>\n                </button>\n                <button class="console-viewer-filter error active" data-type="error">\n                    <span class="filter-dot"></span>\n                </button>\n                <button class="console-viewer-filter info active" data-type="info">\n                    <span class="filter-dot"></span>\n                </button>\n                <button class="console-viewer-filter debug active" data-type="debug">\n                    <span class="filter-dot"></span>\n                </button>\n                <button class="console-viewer-filter result active" data-type="result">\n                    <span class="filter-dot"></span>\n                </button>\n            </div>\n            <div class="console-viewer-logs"></div>\n            <div class="console-viewer-prompt">\n                <div class="console-viewer-prompt-header">\n                    <button class="console-viewer-prompt-toggle">‚Üï Toggle</button>\n                    <div class="console-viewer-prompt-controls">\n                        <button class="console-viewer-run">‚ñ∂ Run</button>\n                    </div>\n                </div>\n                <textarea placeholder="‚Ä∫ Execute JavaScript..." rows="1"></textarea>\n            </div>\n        '}setupEventListeners(){this.elements.toggleBtn.addEventListener("click",()=>this.togglePanel()),this.elements.clearBtn.addEventListener("click",()=>this.clearLogs()),this.elements.searchInput.addEventListener("input",e=>this.handleSearch(e)),this.elements.filterBtns.forEach(e=>{e.addEventListener("click",()=>this.handleFilterToggle(e))}),this.elements.runBtn.addEventListener("click",()=>this.executeCode()),this.elements.promptInput.addEventListener("keydown",e=>this.handlePromptKeydown(e)),this.elements.promptInput.addEventListener("input",()=>this.autoResizeTextarea()),this.elements.promptInput.addEventListener("contextmenu",e=>this.handleContextMenu(e)),this.elements.promptToggle.addEventListener("click",()=>this.togglePrompt()),window.addEventListener("resize",()=>this.autoResizeTextarea())}togglePanel(){this.isVisible=!this.isVisible,this.elements.panel.classList.toggle("hidden",!this.isVisible),this.isVisible&&setTimeout(()=>this.autoResizeTextarea(),100)}clearLogs(){this.logs=[],this.renderLogs()}handleSearch(e){const t=e.target;this.searchQuery=t.value.toLowerCase(),this.renderLogs()}handleFilterToggle(e){const t=e.dataset.type;t&&(this.activeFilters.has(t)?(this.activeFilters.delete(t),e.classList.remove("active")):(this.activeFilters.add(t),e.classList.add("active")),this.renderLogs())}executeCode(){const e=this.elements.promptInput.value;this.executeJS(e),this.elements.promptInput.value="",this.elements.promptInput.style.height="auto",this.autoResizeTextarea()}executeJS(code){if(code.trim()){this.commandHistory.unshift(code),this.commandHistory.length>this.maxCommandHistory&&this.commandHistory.pop(),this.historyIndex=-1,this.logs.push({type:"info",message:`‚Ä∫ ${code}`,time:new Date});try{const result=eval(code);this.logs.push({type:"result",message:void 0!==result?String(result):"undefined",time:new Date})}catch(e){const t=e instanceof Error?e.message:String(e);this.logs.push({type:"error",message:`Error: ${t}`,time:new Date})}this.renderLogs()}}handlePromptKeydown(e){if((e.metaKey||e.ctrlKey)&&["a","c","v","x"].includes(e.key)&&e.stopPropagation(),(e.metaKey||e.ctrlKey)&&"Enter"===e.key)return e.preventDefault(),void this.executeCode();if("ArrowUp"!==e.key||e.shiftKey){if("ArrowDown"===e.key&&!e.shiftKey){this.elements.promptInput.selectionStart===this.elements.promptInput.value.length&&(e.preventDefault(),this.historyIndex>0?(this.historyIndex--,this.elements.promptInput.value=this.commandHistory[this.historyIndex]):0===this.historyIndex&&(this.historyIndex=-1,this.elements.promptInput.value=""),this.autoResizeTextarea())}}else{0===this.elements.promptInput.selectionStart&&this.historyIndex<this.commandHistory.length-1&&(e.preventDefault(),this.historyIndex++,this.elements.promptInput.value=this.commandHistory[this.historyIndex],this.autoResizeTextarea())}}handleContextMenu(e){0===e.clientX&&0===e.clientY&&e.preventDefault()}togglePrompt(){this.isPromptCollapsed=!this.isPromptCollapsed,this.isPromptCollapsed?(this.elements.promptContainer.classList.add("collapsed"),this.elements.promptToggle.textContent="‚Üë Expand",this.elements.promptInput.style.height=this.promptInitialHeight+"px"):(this.elements.promptContainer.classList.remove("collapsed"),this.elements.promptToggle.textContent="‚Üì Collapse",this.autoResizeTextarea())}autoResizeTextarea(){if(!this.elements.panel.offsetHeight)return;const e=this.elements.panel.offsetHeight,t=Math.floor(.7*e),s=Math.floor(.2*e);this.elements.promptInput.style.height="auto";let n=Math.max(32,this.elements.promptInput.scrollHeight);n>t?(n=t,this.elements.promptInput.style.overflowY="auto"):this.elements.promptInput.style.overflowY="hidden",this.elements.promptInput.style.height=n+"px",this.elements.promptInput.style.maxHeight=t+"px",n>s&&!this.isPromptCollapsed?(this.elements.promptToggle.classList.add("visible"),this.elements.promptToggle.textContent="‚Üì Collapse"):this.isPromptCollapsed?(this.elements.promptToggle.classList.add("visible"),this.elements.promptToggle.textContent="‚Üë Expand"):this.elements.promptToggle.classList.remove("visible")}addLog(e,t){const s=t.map(e=>"object"==typeof e&&null!==e?this.formatObject(e):String(e));this.logs.push({type:e,message:s.join(" "),time:new Date}),this.logs.length>this.maxLogEntries&&this.logs.shift(),this.renderLogs()}formatObject(e,t=new WeakSet){var s;if(null===e)return'<span class="json-null">null</span>';if(void 0===e)return'<span class="json-null">undefined</span>';const n=typeof e;if("string"===n)return`<span class="json-string">"${this.escapeHtml(e)}"</span>`;if("number"===n)return`<span class="json-number">${e}</span>`;if("boolean"===n)return`<span class="json-boolean">${e}</span>`;if("symbol"===n)return`<span class="json-null">${e.toString()}</span>`;if("bigint"===n)return`<span class="json-number">${e}n</span>`;if("function"===n){const t=e.toString(),s=t.length>50?t.substring(0,50)+"...":t;return`<span class="json-null">∆í ${e.name||"anonymous"}() { ${this.escapeHtml(s)} }</span>`}if(t.has(e))return'<span class="json-null">[Circular Reference]</span>';try{return t.add(e),this.formatComplexObject(e,t)}catch(t){t instanceof Error?t.message:String(t);try{return`<span class="json-null">[${(null===(s=e.constructor)||void 0===s?void 0:s.name)||typeof e}]</span>`}catch(e){return'<span class="json-null">[Object]</span>'}}}formatComplexObject(e,t){var s;if(e instanceof Date)return`<span class="json-string">${e.toISOString()}</span>`;if(e instanceof RegExp)return`<span class="json-string">${e.toString()}</span>`;if(e instanceof Error)return this.createJsonDisplay({name:e.name,message:e.message,stack:e.stack},e.name);if(e instanceof Map){const t={};return e.forEach((e,s)=>{t[`${s} =>`]=e}),this.createJsonDisplay(t,`Map(${e.size})`)}if(e instanceof Set){const t=Array.from(e);return this.createJsonDisplay(t,`Set(${e.size})`)}if(Array.isArray(e))return this.createJsonDisplay(e,`Array(${e.length})`);if("undefined"!=typeof Element&&e instanceof Element){return`<span class="json-null">&lt;${e.tagName?e.tagName.toLowerCase():"element"}${e.id?`#${e.id}`:""}${e.className?`.${e.className.replace(/\s+/g,".")}`:""}&gt;</span>`}if("undefined"!=typeof Node&&e instanceof Node)return`<span class="json-null">[${e.constructor.name}]</span>`;const n=(null===(s=e.constructor)||void 0===s?void 0:s.name)||"";if(["Window","Document","HTMLDocument","Location","Navigator","Screen","History","Storage","Performance","Console","MediaDevices","AudioContext","WebGLRenderingContext","CanvasRenderingContext2D","XMLHttpRequest","WebSocket"].includes(n)||n.includes("Element")||n.includes("HTML")||n.includes("SVG")){const s=this.extractSafeProperties(e,t);return this.createJsonDisplay(s,n)}if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)){return`<span class="json-null">${e.constructor.name}(${e.byteLength||e.length||0})</span>`}if(e instanceof Promise)return'<span class="json-null">Promise {&lt;pending&gt;}</span>';const o=this.extractSafeProperties(e,t),r="Object"!==n?n:null;return this.createJsonDisplay(o,r)}extractSafeProperties(e,t=new WeakSet){const s={};let n=0;try{for(const o in e){if(n>=this.maxObjectProperties){s["..."]="more properties";break}try{let r=e[o];"function"==typeof r?r=`[Function: ${o}]`:"object"==typeof r&&null!==r&&t.has(r)&&(r="[Circular]"),s[o]=r,n++}catch(e){const t=e instanceof Error?e.message:String(e);s[o]=`[Error: ${t}]`,n++}}const o=Object.getOwnPropertyNames(e);for(const r of o)if(!(s.hasOwnProperty(r)||n>=this.maxObjectProperties))try{const o=Object.getOwnPropertyDescriptor(e,r);if(!o)continue;let i;if(o.get||o.set)i="[Getter/Setter]";else if("function"==typeof o.value)i=`[Function: ${r}]`;else try{i=e[r],"object"==typeof i&&null!==i&&t.has(i)&&(i="[Circular]")}catch(e){i="[Error accessing]"}s[r]=i,n++}catch(e){}if(n<this.maxObjectProperties&&e.constructor&&"Object"!==e.constructor.name){const t=Object.getPrototypeOf(e);if(t&&t!==Object.prototype){const e=Object.getOwnPropertyNames(t);for(const o of e)if(!(s.hasOwnProperty(o)||n>=this.maxObjectProperties)&&"constructor"!==o)try{const e=Object.getOwnPropertyDescriptor(t,o);if(!e)continue;"function"==typeof e.value?(s[o]=`[Function: ${o}]`,n++):(e.get||e.set)&&(s[o]="[Getter/Setter]",n++)}catch(e){}}}}catch(e){return{error:e instanceof Error?e.message:String(e)}}return s}createJsonDisplay(e,t=null){const s="json_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),n="obj_"+s;let o;window.__consoleViewerObjects||(window.__consoleViewerObjects=new Map),window.__consoleViewerObjects.set(n,e);try{const t=new WeakSet;o=JSON.stringify(e,(e,s)=>{if("object"==typeof s&&null!==s){if(t.has(s))return"[Circular]";if(t.add(s),s instanceof Date)return s.toISOString();if(s instanceof RegExp)return s.toString();if(s instanceof Error)return`Error: ${s.message}`;if("function"==typeof s.toString&&s.toString!==Object.prototype.toString&&!Array.isArray(s)){const e=s.toString();if("[object Object]"!==e)return e}}return"function"==typeof s?`[Function: ${s.name||"anonymous"}]`:"symbol"==typeof s?s.toString():"bigint"==typeof s?s.toString()+"n":void 0===s?"[undefined]":s},2)}catch(e){o=`"[Error formatting object: ${e instanceof Error?e.message:String(e)}]"`}const r=this.syntaxHighlightJson(o,n);return`<div class="json-container">\n                <div class="json-header" onclick="toggleJson('${s}')">\n                    <span class="json-toggle" id="toggle_${s}">‚ñº</span>\n                    <span>${t||(Array.isArray(e)?"Array":"Object")}(${Array.isArray(e)?e.length:Object.keys(e).length})</span>\n                </div>\n                <div class="json-content" id="${s}" data-obj-id="${n}">\n                    ${r}\n                </div>\n            </div>`}syntaxHighlightJson(e,t){return(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")).split("\n").map(e=>{var s;const n=(null===(s=e.match(/^(\s*)/))||void 0===s?void 0:s[1])||"",o=e.trim();if(!o)return"";const r=o.match(/"([^"]+)":\s*"\[Function:\s*([^\]]+)\]"/),i=o.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,e=>{let t="json-number";return/^"/.test(e)?t=/:$/.test(e)?"json-key":"json-string":/true|false/.test(e)?t="json-boolean":/null/.test(e)&&(t="json-null"),'<span class="'+t+'">'+e+"</span>"}).replace(/([{}[\],])/g,'<span class="json-bracket">$1</span>');let a=i;if(r){const e=r[1];a=i.replace(/"\[Function:[^\]]+\]"/g,`<span class="json-function" onclick="executeFunction('${t}', '${e}', this)" style="cursor: pointer; text-decoration: underline;">"[Function: ${e}]"</span>`)}else a=i.replace(/"\[Getter\/Setter\]"/g,'<span class="json-null">"[Getter/Setter]"</span>');return n.replace(/ /g,"&nbsp;")+a}).join("<br>")}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}renderLogs(){const e=this.logs.filter(e=>{const t=this.activeFilters.has(e.type),s=""===this.searchQuery||e.message.toLowerCase().includes(this.searchQuery);return t&&s});this.elements.logsContainer.innerHTML=e.map(e=>`\n                <div class="console-log-entry ${e.type}">\n                    ${e.message}\n                </div>\n            `).join(""),this.elements.logsContainer.scrollTop=this.elements.logsContainer.scrollHeight}overrideConsoleMethods(){console.log=(...e)=>{this.originalConsole.log.apply(console,e),this.addLog("log",e)},console.warn=(...e)=>{this.originalConsole.warn.apply(console,e),this.addLog("warn",e)},console.error=(...e)=>{this.originalConsole.error.apply(console,e),this.addLog("error",e)},console.info=(...e)=>{this.originalConsole.info.apply(console,e),this.addLog("info",e)},console.debug=(...e)=>{this.originalConsole.debug.apply(console,e),this.addLog("debug",e)}}setupGlobalFunctions(){window.executeFunction=(e,t,s)=>{var n;try{const o=null===(n=window.__consoleViewerObjects)||void 0===n?void 0:n.get(e);if(!o)return void console.error("Object not found");const r=o[t];if("function"!=typeof r)return void console.error("Property is not a function");const i=r.call(o),a=this.formatObject(i),l=s.parentElement;if(l){const e=l.innerHTML.match(/<span class="json-key">"([^"]+)"<\/span>/);if(e){const t=e[1];l.innerHTML=`<span class="json-key">"${t}"</span><span class="json-bracket">:</span> ${a}`}}}catch(e){const t=e instanceof Error?e.message:String(e);console.error("Error executing function:",e),s.innerHTML=`<span class="json-string">"[Error: ${t}]"</span>`}},window.toggleJson=e=>{const t=document.getElementById(e),s=document.getElementById(`toggle_${e}`);if(t&&s){const e="none"===t.style.display;t.style.display=e?"block":"none",s.textContent=e?"‚ñº":"‚ñ∂"}}}}window.CustomConsole=()=>{new CustomConsoleViewer}});
//# sourceMappingURL=main.min.js.map
